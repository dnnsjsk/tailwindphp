parameters:
    level: 4
    paths:
        - src
    excludePaths:
        - src/*.test.php
        - src/**/*.test.php
        - vendor
        - reference
    reportUnmatchedIgnoredErrors: false
    parallel:
        maximumNumberOfProcesses: 1
    ignoreErrors:
        # Allow dynamic array access patterns used throughout
        - '#Cannot access offset .* on mixed#'
        # PHPDoc type aliases not recognized
        - '#invalid type TailwindPHP\\Ast\\AstNode#'
        - '#invalid type TailwindPHP\\DesignSystem#'
        # Functions from other files in same namespace
        - '#Function .* not found#'
        - '#Call to .* on an unknown class#'
        - '#Constant .* not found#'
        - '#static method .* not found#'
        # Unused closure variables (intentional in ported code)
        - '#Anonymous function has an unused use#'
        # Strict comparison warnings on ported code
        - '#Strict comparison using#'
        # Null coalesce on arrays (intentional defensive coding)
        - '#on left side of \?\? always exists#'
        # Callable checks
        - '#Trying to invoke null but#'
        # Empty check on variable (defensive coding)
        - '#Variable .* in empty\(\) always exists#'
        # DefaultMap generics (complex ported pattern)
        - '#does not accept TailwindPHP\\Utils\\DefaultMap#'
        # Method return type issues with complex arrays
        - '#should return array<string> but returns#'
        # value-parser.php walk() - offset tracking via bitwise NOT changes sign
        # PHPStan analyzes initial value (0) but loop modifies it
        - '#Comparison operation .* between 0 and 0#'
        - '#Result of && is always false#'
        - '#Unreachable statement - code above always terminates#'
        # Defensive type checking in ported code (may never match but kept for safety)
        - '#Call to function is_string\(\) with .* will always evaluate to false#'
        - '#If condition is always true#'
        # Comparison always true in ported escape logic
        - '#Comparison operation .* between int<1, 255> and 1 is always true#'
        - '#Comparison operation .* between int<1, max> and 0 is always true#'
        # Return type variance in closures
        - '#Anonymous function never returns null so it can be removed#'
